/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.3.0
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(l,m,h){"use strict";"undefined"!==typeof module&&module.exports?module.exports=h():"function"===typeof define&&define.amd?define(h):m[l]=h()})("lzbase62",this,function(){function l(){this._length=this._index=this._offset=this._data=null}var m=String.fromCharCode,h=Math.max(62,62)-Math.min(62,62),p=h+20,n=62-h-19;l.prototype={_createWindow:function(){var a;a=" ";var e=1024;if("function"===typeof a.repeat)a=a.repeat(e);else{for(var c="";;)if(e&1&&(c+=a),e>>=1)a+=a;else break;a=c}return a},_search:function(){for(var a=
3,e=this._offset,c=this._data.substr(e,61),f=c.length,b=e-128,d,g;a<=f;){d=c.substr(0,a);g=this._data.substring(b,e+a-1);d=g.lastIndexOf(d);if(~d)this._index=128-d,this._length=a;else break;a++}return 3<a},compress:function(a){if(null==a)return"";var e="",c,f,b,d,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");f=this._createWindow();this._offset=f.length;this._data=f+a;for(a=this._data.length;this._offset<a;)this._search()?(f=this._index%61,b=(this._index-f)/61,e+=g[b+
49]+g[f]+g[this._length],this._offset+=this._length,d=-2):(c=this._data.charCodeAt(this._offset++),132>c?(f=c%40,b=(c-f)/40,b+=63,d===b?e+=g[f]:(e+=g[b-p]+g[f],d=b)):(f=c%1640,b=(c-f)/1640,c=f%40,f=(f-c)/40,b+=67,d===b?e+=g[c]+g[f]:(e+=g[48]+g[b-62]+g[c]+g[f],d=b)));return e},decompress:function(a){if(null==a)return"";var e=this._createWindow(),c,f,b,d,g,h=!1;d=null;var k={};c=0;for(f=62;c<f;c++)k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c)]=c;c=0;for(f=a.length;c<f;c++){b=
k[a.charAt(c)];if(62<=b)throw Error("Out of range in decompression");if(b<n)h?(g=k[a.charAt(++c)],b=40*g+b+1640*d):b=40*d+b,e+=m(b);else if(47>b)d=b-n,h=!1;else if(48===b)d=k[a.charAt(++c)],d-=5,h=!0;else{d=k[a.charAt(++c)];d=61*(b-49)+d;b=k[a.charAt(++c)];if(g=e.slice(-128).slice(-d).substring(0,b)){for(d="";d.length<b;)d+=g;d=d.substring(0,b);e+=d}d=null}}return e.substring(1024)}};return{compress:function(a){return(new l).compress(a)},decompress:function(a){return(new l).decompress(a)}}});
