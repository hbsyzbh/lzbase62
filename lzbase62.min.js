/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.2.2
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(l,m,h){"use strict";"undefined"!==typeof module&&module.exports?module.exports=h():"function"===typeof define&&define.amd?define(h):m[l]=h()})("lzbase62",this,function(){function l(){this._length=this._index=this._offset=this._data=null}var m=String.fromCharCode,h=Math.max(62,62)-Math.min(62,62),p=h+20,n=62-h-19;l.prototype={_createWindow:function(){var a;a=" ";var f=1024;if("function"===typeof a.repeat)a=a.repeat(f);else{for(var b="";;)if(f&1&&(b+=a),f>>=1)a+=a;else break;a=b}return a},_search:function(){var a=
3,f=this._offset,b=this._data.substr(f,59),g=b.length;if(g<a)return!1;for(var d=f-128,c,e;a<=g;){c=b.substr(0,a);e=this._data.substring(d,f+a-1);c=e.lastIndexOf(c);if(~c)this._index=128-c,this._length=a;else break;a++}return 3<a},compress:function(a){if(null==a)return"";var f="",b,g,d,c,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");g=this._createWindow();this._offset=g.length;this._data=g+a;for(a=this._data.length;this._offset<a;)this._search()?(g=this._index%59,d=(this._index-
g)/59,f+=e[61]+e[g]+e[d]+e[this._length],this._offset+=this._length,c=-2):(b=this._data.charCodeAt(this._offset++),132>b?(g=b%40,d=(b-g)/40,d+=63,c===d?f+=e[g]:(f+=e[d-p]+e[g],c=d)):(g=b%1640,d=(b-g)/1640,b=g%40,g=(g-b)/40,d+=67,c===d?f+=e[b]+e[g]:(f+=e[60]+e[d-62]+e[b]+e[g],c=d)));return f},decompress:function(a){if(null==a)return"";var f=this._createWindow(),b,g,d,c,e,h=!1;c=null;var k={};b=0;for(g=62;b<g;b++)k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(b)]=b;b=0;for(g=
a.length;b<g;b++){d=k[a.charAt(b)];if(62<=d)throw Error("Out of range in decompression");if(d<n)h?(e=k[a.charAt(++b)],e=40*e+d+1640*c):e=40*c+d,f+=m(e);else if(47>d)c=d-n,h=!1;else if(60===d)c=k[a.charAt(++b)],c-=5,h=!0;else if(61===d){c=k[a.charAt(++b)];e=k[a.charAt(++b)];c=59*e+c;e=k[a.charAt(++b)];if(d=f.slice(-128).slice(-c).substring(0,e)){for(c="";c.length<e;)c+=d;c=c.substring(0,e);f+=c}c=null}}return f.substring(1024)}};return{compress:function(a){return(new l).compress(a)},decompress:function(a){return(new l).decompress(a)}}});
