/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.0.2
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(g,l,a){"use strict";"undefined"!==typeof module&&module.exports?module.exports=a():"function"===typeof define&&define.amd?define(a):l[g]=a()})("lzbase62",this,function(){function g(){this._length=this._index=this._offset=this._data=null}var l=String.fromCharCode;g.prototype={_createWindow:function(){var a;a=" ";var d=3660;if("function"===typeof String.prototype.repeat)a=a.repeat(d);else{for(var b="";;)if(d&1&&(b+=a),d>>=1)a+=a;else break;a=b}return a},_search:function(){var a=-1,d,b,f,c=this._data.substr(this._offset,
60);if(!c)return!1;for(var e=2,h=c.length;e<=h;e++)if(b=c.substring(0,e),d=this._data.substring(this._offset-3660,this._offset+e-1),d=d.lastIndexOf(b),~d){for(f=d+this._offset-3660;++e<=h&&(b=c.substring(0,e),a=this._data.substring(f,f+e),b===a););e--;a=3660-d}else break;this._index=a;this._length=e-1;return!0},compress:function(a){if(null==a)return"";var d="",b,f,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");b=this._createWindow();this._offset=b.length;for(this._data=
b+a;;){a=this._search();if(!a)break;~this._index?(a=this._index%60,b=(this._index-a)/60,d+=c[61]+c[a]+c[b]+c[this._length],this._offset+=this._length):(b=this._data.charCodeAt(this._offset++),3660>b?(a=b%60,b=(b-a)/60,d+=c[a]+c[b]):(a=b%3660,b=(b-a)/3660,f=a%60,a=(a-f)/60,d+=c[60]+c[b]+c[f]+c[a]))}return d},decompress:function(a){if(null==a)return"";var d=this._createWindow(),b,f,c,e,h,k;k=h=!1;var g={};b=0;for(f=62;b<f;b++)g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(b)]=
b;b=0;for(f=a.length;b<f;b++)if(c=g[a.charAt(b)],60>c)if(e=g[a.charAt(++b)],k){c=60*e+c;k=g[a.charAt(++b)];if(e=d.slice(-3660).slice(-c).substring(0,k)){for(c="";c.length<k;)c+=e;d+=c.substring(0,k)}k=!1}else h?(h=g[a.charAt(++b)],c=60*h+e+3660*c,h=!1):c=60*e+c,d+=l(c);else 60===c?h=!0:61===c&&(k=!0);return d.substring(3660)}};return{compress:function(a){return(new g).compress(a)},decompress:function(a){return(new g).decompress(a)}}});
