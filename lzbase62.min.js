/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.2.0
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(h,l,a){"use strict";"undefined"!==typeof module&&module.exports?module.exports=a():"function"===typeof define&&define.amd?define(a):l[h]=a()})("lzbase62",this,function(){function h(){this._length=this._index=this._offset=this._data=null;this._end=!1}var l=String.fromCharCode;h.prototype={_createWindow:function(){var a;a=" ";var d=1024;if("function"===typeof a.repeat)a=a.repeat(d);else{for(var c="";;)if(d&1&&(c+=a),d>>=1)a+=a;else break;a=c}return a},_search:function(){var a=this._data.substr(this._offset,
59);if(!a)return this._end=!0,!1;var d=4,c=a.length;if(c<d)return!1;var e=a.slice(0,d),e=this._data.substring(this._offset-1024,this._offset+d-1).lastIndexOf(e);if(!~e)return!1;for(var f=e+this._offset-1024,b,g;++d<=c&&(b=a.charAt(d-1),g=this._data.charAt(f+d-1),b===g););this._index=1024-e;this._length=d-1;return!0},compress:function(a){if(null==a)return"";var d="",c,e,f,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");c=this._createWindow();this._offset=c.length;for(this._data=
c+a;;){a=this._search();if(this._end)break;a?(a=this._index%59,e=(this._index-a)/59,d+=b[61]+b[a]+b[e]+b[this._length],this._offset+=this._length,f=-1):(c=this._data.charCodeAt(this._offset++),132>c?(a=c%40,e=(c-a)/40,e=e+62+1,f===e?d+=b[a]:(d+=b[e-20]+b[a],f=e)):(a=c%1640,e=(c-a)/1640,c=a%40,a=(a-c)/40,e=e+62+5,f===e?d+=b[c]+b[a]:(d+=b[60]+b[e-62]+b[c]+b[a],f=e)))}return d},decompress:function(a){if(null==a)return"";var d=this._createWindow(),c,e,f,b,g,h=!1;b=null;var k={};c=0;for(e=62;c<e;c++)k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c)]=
c;c=0;for(e=a.length;c<e;c++)if(f=k[a.charAt(c)],!(62<=f))if(43>f)h?(g=k[a.charAt(++c)],g=40*g+f+1640*b):g=40*b+f,d+=l(g);else if(47>f)b=f-43,h=!1;else if(60===f)b=k[a.charAt(++c)],b-=5,h=!0;else if(61===f){b=k[a.charAt(++c)];g=k[a.charAt(++c)];b=59*g+b;g=k[a.charAt(++c)];if(f=d.slice(-1024).slice(-b).substring(0,g)){for(b="";b.length<g;)b+=f;b=b.substring(0,g);d+=b}b=null}return d.substring(1024)}};return{compress:function(a){return(new h).compress(a)},decompress:function(a){return(new h).decompress(a)}}});
