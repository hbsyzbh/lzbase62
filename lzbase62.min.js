/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.1.0
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(h,m,a){"use strict";"undefined"!==typeof module&&module.exports?module.exports=a():"function"===typeof define&&define.amd?define(a):m[h]=a()})("lzbase62",this,function(){function h(){this._length=this._index=this._offset=this._data=null;this._end=!1}var m=String.fromCharCode;h.prototype={_createWindow:function(){var a;a=" ";var c=256;if("function"===typeof a.repeat)a=a.repeat(c);else{for(var b="";;)if(c&1&&(b+=a),c>>=1)a+=a;else break;a=b}return a},_search:function(){var a=this._data.substr(this._offset,
59);if(!a)return this._end=!0,!1;var c=4,b=a.length;if(a.length<c)return!1;var g=a.slice(0,c),g=this._data.substring(this._offset-256,this._offset+c-1).lastIndexOf(g);if(!~g)return!1;for(var d=g+this._offset-256,f,e;++c<=b&&(f=a.charAt(c-1),e=this._data.charAt(d+c-1),f===e););this._index=256-g;this._length=c-1;return!0},compress:function(a){if(null==a)return"";var c="",b,g,d=null,f=!1,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");b=this._createWindow();this._offset=
b.length;for(this._data=b+a;;){a=this._search();if(this._end)break;a?(a=this._index%59,b=(this._index-a)/59,c+=e[61]+e[a]+e[b]+e[this._length],d=null,this._offset+=this._length):(b=this._data.charCodeAt(this._offset++),3540>b?(a=b%59,b=(b-a)/59,f||d!==b?(d=b,c+=e[59]+e[a]+e[b],f=!1):c+=e[a]):(a=b%3540,b=(b-a)/3540,g=a%59,a=(a-g)/59,f&&d===b?c+=e[g]+e[a]:(d=b,c+=e[60]+e[b]+e[g]+e[a],f=!0)))}return c},decompress:function(a){if(null==a)return"";var c=this._createWindow(),b,g,d,f,e,h=!1;f=!1;var k=null,
l={};b=0;for(g=62;b<g;b++)l["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(b)]=b;b=0;for(g=a.length;b<g;b++)if(d=l[a.charAt(b)],59>d)if(f){f=l[a.charAt(++b)];f=59*f+d;d=l[a.charAt(++b)];if(e=c.slice(-256).slice(-f).substring(0,d)){for(f="";f.length<d;)f+=e;c+=f.substring(0,d)}f=!1}else h?(e=l[a.charAt(++b)],d=59*e+d+3540*k):(null===k&&(k=l[a.charAt(++b)]),d=59*k+d),c+=m(d);else 59===d?(h=!1,k=null):60===d?(h=!0,k=l[a.charAt(++b)]):61===d&&(f=!0,k=null);return c.substring(256)}};
return{compress:function(a){return(new h).compress(a)},decompress:function(a){return(new h).decompress(a)}}});
