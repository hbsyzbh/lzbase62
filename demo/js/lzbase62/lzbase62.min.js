/*
 * lzbase62 - LZ77(LZSS) based compression algorithm in base62 for JavaScript.
 * @version 1.4.0
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(h,l,k){"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports=k():exports[h]=k():"function"===typeof define&&define.amd?define(k):l[h]=k()})("lzbase62",this,function(){"use strict";function h(){this.init()}var l=String.fromCharCode,
t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",k=Math.max(62,62)-Math.min(62,62),n=k+20,m=62-k-19;h.prototype={init:function(){this._length=this._index=this._offset=this._data=null},_createWindow:function(){var d=t.slice(26,52),c="",f=d.length,e,b,g,a;for(e=0;e<f;e++)for(g=d.charAt(e),b=f-1;15<b&&1024>c.length;b--)a=d.charAt(b),c+=" "+g+" "+a;for(;1024>c.length;)c=" "+c;return c=c.slice(0,1024)},
_search:function(){this._length=0;for(var d=this._offset,c=this._data.substr(d,61),f=c.length,e=d-304,b=2,g,a;b<=f;){g=c.substr(0,b);a=this._data.substring(e,d+b-1);if(!~a.indexOf(g))break;a=a.lastIndexOf(g);for(g=e+a;b<=f&&c.charCodeAt(b)===this._data.charCodeAt(g+b);)b++;this._index=304-a;this._length=b;b++}return 0<this._length?!0:!1},compress:function(d){if(null==d||0===d.length)return"";var c="",f=t.split(""),
e=this._createWindow();this._offset=e.length;this._data=e+d;var b=-1;d=-2;for(var e=this._data.length,g,a;this._offset<e;)this._search()?(a=this._index%61,b=(this._index-a)/61,c=2===this._length?c+(f[b+54]+f[a]):c+(f[b+49]+f[a]+f[this._length]),this._offset+=this._length,d=-2):
(g=this._data.charCodeAt(this._offset++),132>g?(a=g%40,b=(g-a)/40,b+=63,d===b?c+=f[a]:(c+=f[b-n]+f[a],d=b)):(a=g%1640,b=(g-a)/1640,g=a%40,a=(a-g)/40,b+=67,d===b?c+=f[g]+f[a]:(c+=f[48]+f[b-62]+f[g]+f[a],d=b)));this._data=null;return c},decompress:function(d){if(null==d||0===d.length)return"";var c=this._createWindow(),f=!1,e=null,b,g,a,k,h={};b=0;for(g=62;b<g;b++)h[t.charAt(b)]=b;b=0;for(g=d.length;b<g;b++){a=h[d.
charAt(b)];if(void 0===a)throw Error("Out of range in decompression");if(a<m)f?(k=h[d.charAt(++b)],a=40*k+a+1640*e):a=40*e+a,c+=l(a);else if(47>a)e=a-m,f=!1;else if(48===a)e=h[d.charAt(++b)],e-=5,f=!0;else if(59>a){e=h[d.charAt(++b)];54>a?(a=61*(a-49)+e,e=h[d.charAt(++b)]):(a=61*(a-54)+e,e=2);if(k=c.slice(-304).slice(-a).substring(0,e)){for(a="";a.length<e;)a+=k;a=a.substring(0,e);c+=a}e=null}}return c=c.substring(1024)}};return{compress:function(d){return(new h).compress(d)},decompress:function(d){return(new h).decompress(d)}}});
